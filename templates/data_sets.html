{% extends "layout.html" %}
{% block body %}
  <button class="ui right aligned button">
    New Data Set
  </button>
  <table class="ui celled table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for data_set in data_sets %}
        <tr id="data-set-{{ data_set[0] }}">
          <td class="collapsing">{{ data_set[0] }}</td>
          <td>{{ data_set[1] }}</td>
          <td>
            <div class="ui blue label">View</div>
            <div
              onclick="delete_data_set({{ data_set[0] }})"
              class="ui black label"
              style="cursor: pointer;"
            >
              Delete
            </div>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <script>
    function delete_data_set(id) {
      $.ajax({
        url: `/data-sets/${id}`,
        type: 'DELETE',
        success: function(data) {
          $(`#data-set-${id}`).remove()
          flash_success('Successfully deleted data set')
        },
        error: function(data) {
          flash_error('Failed to remove data set')
        }
      })
    }
  </script>
{% endblock %}
